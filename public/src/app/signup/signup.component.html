<form #signupForm="ngForm" (ngSubmit)="addUser(signupForm)">
  <div
    *ngIf="success"
    class="alert alert-success alert-dismissible fade show mt-2"
  >
    <strong>Success!</strong> Your Account has been created successfully.
    <a routerLink="/signin" class="link">Signin</a>
    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
  </div>
  <div
    *ngIf="error"
    class="alert alert-danger alert-dismissible fade show mt-2"
  >
    <strong>Error!</strong> {{ errorMessage }}.
    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
  </div>
  <div class="row">
    <div class="form-group mb-2 col-md-6">
      <label class="text-muted">Name:</label>
      <input
        #name="ngModel"
        pattern="[a-zA-Z_ ]{2,}"
        required
        name="name"
        type="text"
        class="form-control"
        placeholder="Enter full name"
        ngModel
      />
      <div *ngIf="name.touched && !name.valid">
        <div *ngIf="name.errors?.['required']">
          <span class="text-danger">Name is required</span>
        </div>
        <div *ngIf="name.errors?.['pattern']">
          <span class="text-danger">Please provide valid name</span>
        </div>
      </div>
    </div>
    <div class="form-group mb-2 col-md-6">
      <label class="text-muted">Username:</label>
      <input
        required
        #username="ngModel"
        pattern="[a-zA-Z]{3,}"
        name="username"
        type="text"
        class="form-control"
        placeholder="Enter username"
        ngModel
      />
      <div *ngIf="username.touched && !username.valid">
        <div *ngIf="username.errors?.['required']">
          <span class="text-danger">Username is required</span>
        </div>
        <div *ngIf="username.errors?.['pattern']">
          <span class="text-danger">Please enter valid username</span>
        </div>
      </div>
    </div>
    <div class="form-group mb-2 col-md-6">
      <label class="text-muted">Password:</label>
      <input
        #password="ngModel"
        required
        pattern=".{6,}"
        name="password"
        type="password"
        class="form-control"
        placeholder="Enter password"
        ngModel
      />
      <div *ngIf="password.touched && !password.valid">
        <div *ngIf="password.errors?.['required']">
          <span class="text-danger">Password is required</span>
        </div>
        <div *ngIf="password.errors?.['pattern']">
          <span class="text-danger"
            >Please enter valid password (At least six charachters)</span
          >
        </div>
      </div>
    </div>
    <div class="form-group mb-2 col-md-6">
      <label class="text-muted">Repeat password:</label>
      <input
        required
        #repeatPassword="ngModel"
        name="repeatPassword"
        type="password"
        class="form-control"
        placeholder="Repeat password"
        ngModel
      />
      <div *ngIf="repeatPassword.touched && !repeatPassword.valid">
        <div *ngIf="repeatPassword.errors?.['required']">
          <span class="text-danger">Please confirm your password</span>
        </div>
      </div>
    </div>
  </div>
  <button class="btn btn-primary m-2" [disabled]="!signupForm.form.valid">
    Signup
  </button>
  | <a routerLink="/travels" class="btn btn-secondary m-2">Cancel</a>
</form>
